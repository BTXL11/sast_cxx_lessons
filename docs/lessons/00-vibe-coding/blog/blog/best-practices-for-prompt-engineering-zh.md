# 最佳提示工程实践

### 借助 Claude 团队的提示工程技术，获得更优质的 AI 输出

> 类别：智能体（Agents）｜ 产品：Claude 应用｜ 日期：2025 年 11 月 10 日｜ 阅读时间：5 分钟

-----

**上下文工程**（Context engineering）已成为使用大语言模型（LLM）过程中日益重要的一环，而提示工程（Prompt engineering）是其核心基础。

**提示工程**是一门构建指令以从 AI 模型中获得更佳输出的艺术。它包含如何措辞提问、指定风格、提供上下文，以及引导模型行为，从而达成你的目标。

- **差距所在**：模糊指令与精心设计的提示之间的差异，可能意味着输出是泛泛而谈还是精准满足需求。
- **目标所在**：一个经过良好设计的提示能让你一步到位，避免多次来回交互。

-----

## 核心技巧

这些技巧构成了高效 AI 交互的基础。持续使用它们可立即提升效果。

### 1. 明确且清晰

现代 AI 模型对清晰的指令响应极佳。不要假定模型能自行推断你的意图——直接说明。

- **核心原则**：明确告诉模型你希望看到什么。如果需要特定功能，请逐一列出。

**示例：创建分析仪表盘**

| 模糊 | 明确 |
| :--- | :--- |
| “创建一个分析仪表盘” | “创建一个分析仪表盘。尽可能包含所有相关功能与交互。超越基础功能，实现一个功能完整的版本。” |

**最佳实践**：

- 使用直接的动作动词开头：“撰写”、“分析”、“生成”、“创建”。
- 省略铺垫，直接提出请求。
- 明确说明输出应**包含**的内容，而不仅是你希望模型处理的主题。
- 对质量与深度提出具体期望。

### 2. 提供上下文与动机

解释**为何**某件事重要，有助于 AI 模型提供更有针对性的响应。

**示例：格式偏好**

> **效果较差**：“永远不要使用项目符号列表”  
> 
> **效果更佳**：“我偏好以自然段落形式呈现回答，而非项目符号列表，因为我发现流畅的叙述更易于阅读，也更具对话感。项目符号列表对我来说显得过于正式和清单化。”

**何时提供上下文**：

- 说明目的或受众。
- 阐明限制条件。
- 描述使用场景。
- 指出你正在解决的问题。

### 3. 具体化

以明确的指导原则构建指令。越具体，效果越好。

**示例：膳食计划**

- **模糊**：“为地中海饮食制定一份膳食计划”
- **具体**：“为糖尿病前期管理设计一份地中海饮食膳食计划。每日总热量为 1800 千卡，强调低升糖指数食物。列出早餐、午餐、晚餐及一份加餐，并附完整的营养成分明细。”

### 4. 使用示例（少样本提示）

示例是“展示”而非“讲述”，能清晰传达语气或格式等细微要求。

**示例：文章摘要**

```text
以下是我期望的摘要风格示例：
文章：[关于 AI 监管的文章链接]
摘要：欧盟通过全面的《人工智能法案》，重点监管高风险系统。关键条款包括透明度要求与人工监督机制。法案将于 2026 年生效。

请按相同样式为以下文章撰写摘要：[你的新文章链接]
```

> 提示：从一个示例（单样本）开始。仅在输出仍需优化时才增加更多示例（少样本）。

### 5. 允许模型表达不确定性

通过明确允许 AI 回答“我不知道”，可有效减少幻觉（hallucination）。

**示例**：

> “分析这份财务数据并识别趋势。**如果数据不足以得出结论，请明确说明，不要猜测。**”

-----

## 高级技巧

适用于构建智能体解决方案、复杂数据结构或多阶段问题。

### 1. 预填充 AI 的回答

通过预先输入 AI 回答的开头，引导其格式或跳过冗余铺垫。

**示例：强制输出 JSON**

```python
messages=[
    {"role": "user", "content": "从以下产品描述中提取名称和价格，并以 JSON 格式返回。"},
    {"role": "assistant", "content": "{"}
]
```

*AI 将从 `{` 开始继续输出，从而生成有效的 JSON。*

### 2. 思维链（Chain of Thought, CoT）提示

在最终答案前要求逐步推理。  
*注：Claude 的“扩展思维”（Extended Thinking）功能已自动实现此过程，但在该功能不可用时，手动 CoT 仍然有用。*

- **基础 CoT**：在指令中加入“逐步思考”。
- **引导式 CoT**：指定推理阶段（例如：先考虑 X，再分析 Y，最后写出 Z）。
- **结构化 CoT**：使用标签将推理与答案分离。

    ```xml
    在 <thinking> 标签内思考如何撰写邮件。
    然后在 <email> 标签内撰写邮件。
    ```

### 3. 控制输出格式

- **告诉 AI 应该做什么**：与其说“不要用 Markdown”，不如说“使用流畅的叙述性文字”。
- **匹配提示风格**：如果你希望输出尽量少用 Markdown，你的提示本身也应少用 Markdown。
- **明确说明**：
    > “不要使用有序列表……将各项自然融入句子中。”

### 4. 提示链（Prompt Chaining）

将复杂任务拆分为多个按序执行的步骤，每个步骤使用独立提示（以延迟换精度）。

1. **提示 1**：“总结这篇论文……”
2. **提示 2**：“复核上述摘要的准确性……”
3. **提示 3**：“根据反馈改进摘要……”

-----

## 传统技巧（谨慎使用）

部分旧技巧在 Claude 3.5/4.x 等现代模型中已不那么必要。

- **XML 标签**：在极复杂的提示中仍可用于界定边界（例如 `<athlete_info>...</athlete_info>`），但现代模型通常无需标签即可理解结构。
- **角色提示**：“你是一位通用专家”往往不如具体指令有效。  
  - *替代方案*：“你是一位财务顾问。”  
  - *更优方案*：“分析该投资组合，重点关注风险承受能力与长期增长潜力。”

-----

## 综合运用

真正的威力在于技巧的组合使用。

**示例：复合提示**

```text
从这份季度报告中提取关键财务指标，并以 JSON 格式呈现。

我需要将这些数据用于自动化处理，因此你的回复必须仅包含有效的 JSON，不得包含任何前言或解释。

请使用以下结构：
{
  "revenue": "带单位的数值",
  "profit_margin": "百分比",
  "growth_rate": "百分比"
}

若报告中未明确说明某项指标，请使用 null，切勿猜测。

请以左花括号 { 开始你的回复。
```

**所用技巧**：  
✓ 明确指令  
✓ 上下文说明（用于自动化处理）  
✓ 示例结构  
✓ 允许不确定性（使用 null）  
✓ 预填充（以 { 开头）

-----

## 决策框架：如何选择技巧？

**从这里开始**：你的请求是否清晰？如果不清晰，优先提升清晰度。

| 如果你需要…… | 使用…… |
| :--- | :--- |
| 特定输出格式 | 示例、预填充或明确的格式指令 |
| 逐步推理 | 扩展思维（Claude 4.x）或思维链（CoT） |
| 复杂多阶段任务 | 提示链（Prompt Chaining） |
| 透明的推理过程 | 带结构化输出的思维链 |
| 防止幻觉 | 允许回答“我不知道” |

-----

## 故障排查与常见错误

### 故障排查

- **回答过于泛泛**？ → 增加具体性、提供示例，或要求“超越基础内容”。
- **偏离重点**？ → 提供你提问的**背景动机**。
- **格式不一致**？ → 使用单样本/少样本示例或预填充。
- **任务过于复杂**？ → 拆分为多个提示链。
- **前言冗余**？ → 使用预填充或明确说明“跳过前言”。
- **出现幻觉**？ → 明确允许表达不确定性。

### 应避免的错误

- 不要过度设计：更长≠更好。
- 不要忽视基础：清晰性至关重要。
- 不要假设模型能读心：务必具体。
- 不要同时堆砌所有技巧：仅选用解决当前问题所需的部分。
- 不要忘记迭代：测试并优化提示。

-----

## 结语

提示工程本质上是沟通的艺术。最佳提示并非最复杂的那个，而是能以最少必要结构可靠达成目标的那个。

> **上下文感知提示**：现代模型虽能处理长上下文，但**任务拆分**依然有价值。它帮助模型聚焦于特定范围，从而产出比“一次性完成所有任务”的庞大提示更高质量的结果。

从核心技巧开始。仅在必要时再叠加高级方法。

[anthropic.skilljar.com](https://anthropic.skilljar.com) — 查看提示工程课程，评估你的提示效果。
